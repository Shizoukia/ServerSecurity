package me.alek.antimalware.configuration;

import me.alek.antimalware.lang.Locale;
import me.alek.antimalware.security.operator.OperatorManager;
import org.bukkit.configuration.file.FileConfiguration;

import java.util.List;

public class ConfigurationOptions {

    private Locale locale;
    private boolean securityEnabled = false;
    private boolean preventCancelledMaliciousChatEvents = false;
    private boolean opProxyBlockerEnabled = false;
    private boolean throwExceptionOnOp = false;

    public ConfigurationOptions(final Configuration configuration) {
        final FileConfiguration config = configuration.getFileConfiguration();
        this.securityEnabled = config.getBoolean("security-mode-enabled");
        if (securityEnabled) {
            this.preventCancelledMaliciousChatEvents = config.getBoolean("prevent-cancelled-malicious-chat-event");
            this.opProxyBlockerEnabled = config.getBoolean("op-proxy-blocker");
            this.throwExceptionOnOp = config.getBoolean("throw-exception-on-op");
        }
        if (opProxyBlockerEnabled) {
            List<String> opPlayersAllowed = config.getStringList("target");
            OperatorManager.get().setAllowedOpPlayers(opPlayersAllowed);
        }
        this.locale = Locale.fromString(config.getString("locale"));
    }

    public boolean isSecurityEnabled() {
        return securityEnabled;
    }

    public boolean isPreventCancelledMaliciousChatEvents() {
        return preventCancelledMaliciousChatEvents;
    }

    public boolean isOpProxyBlockerEnabled() {
        return opProxyBlockerEnabled;
    }

    public boolean isThrowExceptionOnOp() {
        return throwExceptionOnOp;
    }

    public Locale getLocale() {
        return locale;
    }

}
